<!DOCTYPE html>
<html lang="en-us">

  <head>
	<link href="http://gmpg.org/xfn/11" rel="profile">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta name="description" content="Codoki is a web development and design
	blog about the latest trends in web technology.">

	<!-- Enable responsiveness on mobile devices-->
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
      <!-- REDIRECT -->
  <meta http-equiv="refresh" content="0; url=https://cdmedia.github.io/posts/2015-01-27-getting-started-with-slim-framework">
  <link rel="canonical" href="https://cdmedia.github.io/posts/2015-01-27-getting-started-with-slim-framework" />
	<title>
	
	Getting Started with Slim Framework - Creating a RESTful API &middot; Codoki
	
	</title>

	<!-- CSS -->
	<link href="http://cdn.rawgit.com/noelboss/featherlight/1.0.4/release/featherlight.min.css" type="text/css" rel="stylesheet" title="Featherlight Styles" />
	<link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
	<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">
	<link rel="stylesheet" href="../../../../public/css/poole.css">
	<link rel="stylesheet" href="../../../../public/css/monokai.css">
	<link rel="stylesheet" href="../../../../public/css/lanyon.css">
	<link rel="stylesheet" href="../../../../public/css/codoki.css">

	<!-- Icons -->
	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../../../public/apple-touch-icon-precomposed.png">
	<link rel="shortcut icon" href="../../../../public/favicon.ico">

	<!-- JS -->
	<script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
	<script src="http://cdn.rawgit.com/noelboss/featherlight/1.0.4/release/featherlight.min.js" type="text/javascript" charset="utf-8"></script>
	<script src="../../../../public/js/modernizr.custom.js"></script>
	<script src="../../../../public/js/classie.js"></script>
	<script src="../../../../public/js/search.js"></script>
	<script src="../../../../public/js/script.js"></script>

	<!-- RSS -->
	<link rel="alternate" type="application/rss+xml" title="RSS" href="http://codoki.com/atom.xml">
</head>


  <body class="layout">

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p></p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="../../../../index.html">Home</a>

    

    
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="../../../../archive/index.html">Archive</a>
        
      
    
      
    
      
        
          <a class="sidebar-nav-item" href="../../../../learning/index.html">Learning Resources</a>
        
      
    
      
        
          <a class="sidebar-nav-item" href="../../../../links/index.html">Links</a>
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
    
      
        
      
    
      
        
      
    

	    <a class="sidebar-nav-item" href="../../../../resources.html">News/Inspiration</a>
	    <a class="sidebar-nav-item" href="../../../../about.html">About</a>
	    <a class="sidebar-nav-item" href="../../../../subscribe.html"><i class="fa fa-envelope-o"></i> Subscribe</a>

	    <!--<span class="sidebar-nav-item"></span>-->
    </nav>
  </div>
</div>



    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
    <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a class="logo-wrap" href="../../../../index.html" title="Home">
			  <img class="logo logo" src="../../../../public/img/codoki-logo2.png" />
			 </a>
            <a class="title" href="../../../../index.html" title="Home">Codoki</a>
            <small>Tutorials, resources and tips for Web Developers</small>
          </h3>
        </div>
      </div>

       <a href="index.html#" id="trigger-overlay"><i class="fa fa-search fa-lg search-icon"></i></a>

      <div class="container content">
        <div class="post">
  <h1 class="post-title">Getting Started with Slim Framework - Creating a RESTful API</h1>
  <span class="post-date">27 Jan 2015
	<ul class="tag_list_in_post">
	
		<li class="inline tag_list_item">
			<a class="tag_list_link" href="../../../../tags.1.html#php">php</a>
		</li>
	
		<li class="inline tag_list_item">
			<a class="tag_list_link" href="../../../../tags.1.html#framework">framework</a>
		</li>
	
		<li class="inline tag_list_item">
			<a class="tag_list_link" href="../../../../tags.1.html#mvc">mvc</a>
		</li>
	
		<li class="inline tag_list_item">
			<a class="tag_list_link" href="../../../../tags.1.html#rest">rest</a>
		</li>
	
		<li class="inline tag_list_item">
			<a class="tag_list_link" href="../../../../tags.1.html#api">api</a>
		</li>
	
		<li class="inline tag_list_item">
			<a class="tag_list_link" href="../../../../tags.1.html#slim">slim</a>
		</li>
	
	<p id="post-meta"></p>
	</ul>
  </span>
  <p>Here&#39;s a quick tutorial to get up and running with Slim PHP Framework to start building
RESTful applications.</p>

<p><strong>Why a REST API?</strong></p>

<p>A REST API acts like a middle-man between clients (mobile devices, computers) and the database server.
This type of infrastructure allows clients using completely different technologies
or operating systems to communicate in one type of protocol. That way as technologies
change, the method of communication with the database and server logic can remaind
the same. Just remember, the application we are building is meant to be used
with client applications and not really meant for actual users to be using it...
so it&#39;s not going to look very pretty. We will be building <a href="../../../03/20/getting-started-with-slim-framework-pt-2/index.html">a nice looking client
application later</a> that will be used to interact with the API--and that will look pretty.</p>

<p><strong>Why use Slim?</strong></p>

<p>Slim is a micro framework for PHP that allows you to quickly build web applications and APIs.
I like Slim because it&#39;s super lightweight (only about 283kb for the entire framework) as
opposed to larger PHP frameworks like Codeigniter and Symfony, which have a lot of extra fluff.
This means that&#39;s it really fast, and great for building a REST API for use on a multitude of
devices.</p>

<hr>

<h3>1. Install</h3>

<p>You can start by downloading it <a href="https://github.com/codeguy/Slim">here</a> and
extract the Slim framework into your project directory.</p>

<h3>2. Create a database</h3>

<p>Login into MySQL and create a new database to have our Slim application interact
with.</p>
<div class="highlight"><pre><code class="language-" data-lang="">CREATE DATABASE garage;
USE garage;
CREATE TABLE cars (
    id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    year INT(4) NOT NULL, make VARCHAR(30) NOT NULL,
    model VARCHAR(40) NOT NULL
);
</code></pre></div>
<p>Insert some sample data into the database.</p>
<div class="highlight"><pre><code class="language-" data-lang="">INSERT INTO cars (year, make, model) VALUES
    (1991, 'Ferrari', 'Testarossa'),
    (1994, 'Acura', 'NSX'),
    (1992, 'Toyota', 'Corolla');
</code></pre></div>
<h3>3. Download NotORM</h3>

<p>We are also going to use a plugin called <a href="http://www.notorm.com/">NotORM</a>
that will make working with the database easier. Create a <code>plugins</code> folder in your
project directory and place the downloaded NotORM plugin inside it. Your directory
should look like this:</p>
<div class="highlight"><pre><code class="language-" data-lang="">- .htaccess
- index.php
- Slim/
- plugins/
- - NotORM/
- - NotORM.php
</code></pre></div>
<h3>4. Remove and replace index.php</h3>

<p>Now, just delete the included <code>index.php</code> and create a new one as were are going
to going through it step by step. In your <code>index.php</code> file add this lines. This
will require the framework, register the autoloader and instantiate the Slim
application. Also, we are requiring the NotORM library for handling the database.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">/* Require Slim and plugins */
require 'Slim/Slim.php';
require 'plugins/NotORM.php';

/* Register autoloader and instantiate Slim */
\Slim\Slim::registerAutoloader();
$app = new \Slim\Slim();</code></pre></figure>

<h3>5. NotORM Database Configuration</h3>

<p>We need to setup the NotORM library so it can talk with the database:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">/* Database Configuration */
$dbhost   = 'localhost';
$dbuser   = 'root';
$dbpass   = '';
$dbname   = 'garage';
$dbmethod = 'mysql:dbname=';

$dsn = $dbmethod.$dbname;
$pdo = new PDO($dsn, $dbuser, $dbpass);
$db = new NotORM($pdo);</code></pre></figure>

<h3>6. Setup our first Route</h3>

<p>Now we are going to setup a HTTP GET route for the home URL. In this step, we
will actually be able to start to see our application work. Below the database
configuration add:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">/* Routes */
$app-&gt;get('/', function(){
    echo 'Home - My Slim Application';
});

/* Run the application */
$app-&gt;run();</code></pre></figure>

<p>If you visit <code>http://localhost/slim-cars/</code> you should now see your home message
from above.</p>

<p>We have the Slim application working, so now we are going to setup routes for
RESTful Web Services, using GET, PUT, POST and DELETE to handle
CRUD (Create, Read, Update, Delete) operations.</p>

<h3>7. Getting the Cars</h3>

<p>Now that we have our Slim app up and running, we need to get items from the
database. We are going to create a new route so that when a user (or device) hits
your base url and then <code>/cars</code>, it will return a list of all cars in the database in
JSON format. Right below your <code>home</code> route (and above the <code>$app-&gt;run()</code>) add:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">// Get all cars
$app-&gt;get('/cars', function() use($app, $db){
    $cars = array();
    foreach ($db-&gt;cars() as $car) {
        $cars[]  = array(
            'id' =&gt; $car['id'],
            'year' =&gt; $car['year'],
            'make' =&gt; $car['make'],
            'model' =&gt; $car['model']
        );
    }
    $app-&gt;response()-&gt;header("Content-Type", "application/json");
    echo json_encode($cars, JSON_FORCE_OBJECT);
});</code></pre></figure>

<p>Here is what happens: First, we tell Slim we are setting up a HTTP GET Route
<code>/cars</code>. We add paramaters <code>$app</code> and <code>$db</code> to tell Slim to use the Slim app and
NotORM database library. We then create an empty cars array and loop through the
database getting all cars. Finally, we set the repsonse header to JSON and echo
the cars array as a JSON object. If you hit <code>http://localhost/slim-cars/cars</code> in
your browser, you should now see all the cars in the database as JSON.</p>

<p>Alternatively , we can use cURL to test the GET request. Pull up your terminal
and type:</p>
<div class="highlight"><pre><code class="language-" data-lang="">curl -i -X GET http://localhost/slim-cars/cars
</code></pre></div>
<p>You should get a response similar to this:</p>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP/1.1 200 OK
Date: Wed, 18 Feb 2015 14:24:19 GMT
Server: Apache/2.4.9 (Unix) PHP/5.5.14
X-Powered-By: PHP/5.5.14
Content-Length: 189
Content-Type: application/json

{"0":{"id":"1","year":"1991","make":"Ferrari","model":"Testarossa"},"1":{"id":"2","year":"1994","make":"Acura","model":"NSX"},"2":{"id":"3","year":"1992","make":"Toyota","model":"Corolla"}}
</code></pre></div>
<h3>8. Getting A Single Car</h3>

<p>We&#39;ve setup a route to get all the cars, but what if we just want a single car?
We&#39;ll follow a similar structure as above:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">// Get a single car
$app-&gt;get('/cars/:id', function($id) use ($app, $db) {
    $app-&gt;response()-&gt;header("Content-Type", "application/json");
    $car = $db-&gt;cars()-&gt;where('id', $id);
    if($data = $car-&gt;fetch()){
        echo json_encode(array(
            'id' =&gt; $data['id'],
            'year' =&gt; $data['year'],
            'make' =&gt; $data['make'],
            'model' =&gt; $data['model']
        ));
    }
    else{
        echo json_encode(array(
            'status' =&gt; false,
            'message' =&gt; "Car ID $id does not exist"
        ));
    }
});</code></pre></figure>

<p>Similar to getting all the cars, we create a GET Route but this time we have a
callback argument <code>:id</code> added after <code>cars/</code>. This id is passed into the function
and then reads the cars from the database, finding only the car that matches the
id. Then, it encodes the result into JSON format and echos it back. If the car id
doesn&#39;t exist, it returns an error message.</p>

<p>Now let&#39;s test it out using cURL:</p>
<div class="highlight"><pre><code class="language-" data-lang="">curl -i -X GET http://localhost/slim-cars/cars/1
</code></pre></div>
<p>You should get back:</p>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP/1.1 200 OK
Date: Wed, 18 Feb 2015 14:24:37 GMT
Server: Apache/2.4.9 (Unix) PHP/5.5.14
X-Powered-By: PHP/5.5.14
Content-Length: 62
Content-Type: application/json

{"id":"1","year":"1991","make":"Ferrari","model":"Testarossa"}
</code></pre></div>
<h3>9. Adding a Car</h3>

<p>We retrieved cars from the database, but what about adding a new one? We will be
using the POST web service to signal creation of a new car in the database. To
do this, let&#39;s add this below the <code>Get a single car</code> route:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">// Add a new car
$app-&gt;post('/car', function() use($app, $db){
    $app-&gt;response()-&gt;header("Content-Type", "application/json");
    $car = $app-&gt;request()-&gt;post();
    $result = $db-&gt;cars-&gt;insert($car);
    echo json_encode(array('id' =&gt; $result['id']));
});</code></pre></figure>

<p>Let&#39;s use cURL to try adding a new car.</p>
<div class="highlight"><pre><code class="language-" data-lang="">curl -X POST -d "year=1981&amp;make=DeLorean&amp;model=DMC-12" http://localhost/slim-cars/car
</code></pre></div>
<p>If you log back into MySQL, you should now see your new car added to the database.</p>

<h3>10. Updating a Car</h3>

<p>Now we are going to add an UPDATE route in order to edit current cars in the
database. To do this, we are going to be using the PUT method:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">// Update a car
$app-&gt;put('/car/:id', function($id) use($app, $db){
    $app-&gt;response()-&gt;header("Content-Type", "application/json");
    $car = $db-&gt;cars()-&gt;where("id", $id);
    if ($car-&gt;fetch()) {
        $post = $app-&gt;request()-&gt;put();
        $result = $car-&gt;update($post);
        echo json_encode(array(
            "status" =&gt; (bool)$result,
            "message" =&gt; "Car updated successfully"
            ));
    }
    else{
        echo json_encode(array(
            "status" =&gt; false,
            "message" =&gt; "Car id $id does not exist"
        ));
    }
});</code></pre></figure>

<p>Similar to getting a single car, we are using a callback argument <code>:id</code> to tell
the application which car we want to edit. We then grab the car with the correct
id from the database and update it. If the update was successful, we&#39;ll echo a
success message. If the car doesn&#39;t exist, well echo that the car doesn&#39;t exist.</p>

<p>We can test this out using cURL PUT method in terminal:</p>
<div class="highlight"><pre><code class="language-" data-lang="">curl -X PUT -d "year=2015&amp;make=Lamborghini&amp;model=700-4" http://localhost/slim-cars/car/3
</code></pre></div>
<h3>11. Removing a Car</h3>

<p>The last thing we need to be able to do is remove a car. We are going to be using
the DELETE method to remove cars. Here&#39;s how we are going to setup our DELETE route:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">// Remove a car
$app-&gt;delete('/car/:id', function($id) use($app, $db){
    $app-&gt;response()-&gt;header("Content-Type", "application/json");
    $car = $db-&gt;cars()-&gt;where('id', $id);
    if($car-&gt;fetch()){
        $result = $car-&gt;delete();
        echo json_encode(array(
            "status" =&gt; true,
            "message" =&gt; "Car deleted successfully"
        ));
    }
    else{
        echo json_encode(array(
            "status" =&gt; false,
            "message" =&gt; "Car id $id does not exist"
        ));
    }
});</code></pre></figure>

<p>Similar to above, we are using the callback argument to get a specific car by their
id. Then, we find that car in the database and delete it using NotORM&#39;s <code>delete()</code>
method. We will then echo back a message if the car was successfully deleted, or if
the car does not exist.</p>

<p>We can test out this functionality using cURL DELETE:</p>
<div class="highlight"><pre><code class="language-" data-lang="">curl -i -X DELETE http://localhost/slim-cars/car/4
</code></pre></div>
<h3>Conclusion</h3>

<p>We&#39;ll there you have it, we have just built a RESTful application that can be used to GET, POST,
PUT and DELETE items from the database. This is a great starting point and can be
expanded to include more methods, routes, and even authentication.</p>

<p>You can download the source of this app in a step by step (in GIT) version on <a href="https://github.com/cdmedia/slim-cars">Github</a>.</p>

<p>The next step in this tutorial is to create a client that will communicate with
this REST API that we&#39;ve just built - <a href="../../../03/20/getting-started-with-slim-framework-pt-2/index.html">Getting Started with Slim Framework - Part 2</a></p>

<hr>

<p>Other Resources</p>

<ul>
<li><a href="http://docs.slimframework.com">Slim Documentation</a></li>
<li><a href="http://coenraets.org/blog/2011/12/restful-services-with-jquery-php-and-the-slim-framework/">RESTful services with jQuery, PHP and the Slim Framework</a></li>
<li><a href="http://www.sitepoint.com/writing-a-restful-web-service-with-slim/">Writing a RESTful Web Service with Slim</a></li>
<li><a href="http://code.tutsplus.com/tutorials/taming-slim-20--net-30669">Taming Slim 2.0</a></li>
<li><a href="http://www.slimframework.com/news/how-to-organize-a-large-slim-framework-application">How to organize a large slim application</a></li>
<li><a href="http://curl.haxx.se/docs/">cURL Docs</a></li>
</ul>

</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="../../../../2016/01/20/getting-started-with-react-js/index.html">
            Getting Started with React.js - Concepts and Creating Your First App
            <small>20 Jan 2016</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="../../../09/01/native-javascript-templating/index.html">
            Native Javascript Templating - Goodbye Handlebars
            <small>01 Sep 2015</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="../../../08/07/build-a-local-search-app-with-geo/index.html">
            Build a local search based app with geolocation
            <small>07 Aug 2015</small>
          </a>
        </h3>
      </li>
    
  </ul>

  <hr>
  <h2>Popular Posts</h2>
   <ul class="related-posts popular">
   		<li><h3><a href="index.html">Getting Started with Slim Framework - Creating a RESTful API</a></h3></li>
      	<!--<li><h3><a href="/2015/08/07/build-a-local-search-app-with-geo/">Build a local search based app with geolocation</a></h3></li>-->
      	<li><h3><a href="../../../07/06/simplestore/index.html">simpleStore - Open-source online store with no database or backend</a></h3></li>
  </ul>

  <div class="updates">
    <hr>
    <!--<span>Want updates? <a href="http://eepurl.com/bpduc5" data-featherlight data-featherlight-type="iframe">Subscribe to get the latest goodies</a></span>-->
	<!-- Begin MailChimp Signup Form -->
	<link href="http://cdn-images.mailchimp.com/embedcode/classic-081711.css" rel="stylesheet" type="text/css">
	<style type="text/css">
		#mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; }
		#mc_embed_signup form { padding: 0px 0 0px 0%; }
	</style>
	<div id="mc_embed_signup">
	<form action="http://saturnbit.us10.list-manage.com/subscribe/post?u=6a958cda028d0d312d1ef3ccd&amp;id=4ee23b7fda" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
		<div id="mc_embed_signup_scroll">
		<h2>Want Updates?</h2>
	<div class="mc-field-group">
		<label for="mce-EMAIL">Email Address </label>
		<input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL">
	</div>
		<div id="mce-responses" class="clear">
			<div class="response" id="mce-error-response" style="display:none"></div>
			<div class="response" id="mce-success-response" style="display:none"></div>
		</div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
		<div style="position: absolute; left: -5000px;"><input type="text" name="b_6a958cda028d0d312d1ef3ccd_4ee23b7fda" tabindex="-1" value=""></div>
		<div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
		</div>
	</form>
	</div>
	<script type='text/javascript' src='http://s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js'></script><script type='text/javascript'>(function($) {window.fnames = new Array(); window.ftypes = new Array();fnames[0]='EMAIL';ftypes[0]='email';fnames[1]='FNAME';ftypes[1]='text';fnames[2]='LNAME';ftypes[2]='text';}(jQuery));var $mcj = jQuery.noConflict(true);</script>
	<!--End mc_embed_signup-->
  </div>
</div>

      	
<div id="disqus_thread"></div>
<script type="text/javascript">
	/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
	var disqus_shortname = 'cdianamedia'; // required: replace example with your forum shortname

	/* * * DON'T EDIT BELOW THIS LINE * * */
	(function() {
	 var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	 dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	 (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	 })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

   <!-- Full screen search overlay - open/close -->
    <div class="overlay overlay-hugeinc">
      <button type="button" class="overlay-close"><i class="fa fa-close"></i></button>
      <div class="search-container">
        <input id="search-input" placeholder="Search..." />
        <div id="results-container"></div>
      </div>
    </div>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-67203123-1', 'auto');
  ga('send', 'pageview');

</script>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;

          checkbox.checked = false;
        }, false);
      })(document);
    </script>
  </body>
</html>
